---
layout: post
title: "Analyzing Positional Contributions in Bayer Leverkusen’s Unbeaten Season with VAEP"
date: 2025-01-03
featured_image: /assets/images/Final_Transfer_Header.png
excerpt: "<em>Through the lens of Principal Component Analysis (PCA), this blog tries to uncover how player and team metrics from the 2015/2016 season reveal patterns of stylistic alignment and divergence. From Memphis Depay’s attacking resurgence at Lyon to İlkay Gündoğan’s evolution under Guardiola at Manchester City, PCA offers a data-driven perspective on transfers that worked—and others that posed challenges. By identifying key dimensions like progressive passing and possession tendencies, this analysis demonstrates how mathematical simplicity can help illuminate football’s complex tactical landscape.
</em>"
subtitle: "Exploring How Leverkusen’s Positional Units Shaped their Success"
---

# Introduction

As transfer fees soar, evaluating whether a player’s style fits a team’s tactics has become critical. Analysts have developed data-driven tools that go beyond goals and assists to assess playing styles and compatibility. For example, [Decroos and Davis (2019)](https://ecmlpkdd2019.org/downloads/paper/701.pdf) introduced player vectors to compare styles and track development, while [Pappalardo et al. (2019)](https://dl.acm.org/doi/10.1145/3343172) created PlayeRank to evaluate players based on their roles and contributions. The Twenty First Group uses advanced models to assess player value and style, aiding smarter transfer decisions.

[Player embedding using UMAP by Charles William](https://opengoalapp.github.io/Player-Embedding-With-UMAP/) simplifies large datasets to reveal patterns. Inspired by such methods, I explored whether Principal Component Analysis (PCA) could uncover insights into playing styles and player-team fit. PCA condenses complex metrics into a few dimensions, capturing differences like possession, dribbling, or direct play, offering a starting point for evaluating compatibility.

While tools like PCA highlight trends, they work best alongside traditional scouting to capture tactical and psychological nuances. This analysis uses PCA to examine player-team fit while considering football’s broader complexities.

---

## Why I Use PCA & My Goal

I chose Principal Component Analysis (PCA) as it simplifies complex datasets while uncovering valuable patterns:

1. **Reduces Complexity:** PCA condenses a large set of metrics into just a few principal components—dimensions or axes that represent the most important differences across players and teams.  
2. **Reveals Patterns:** It helps identify similarities and differences between teams and players—like whether a player is dribble-heavy, a consistent passer, or leans more on defensive contributions.

My goal is to uncover these broad stylistic traits and visualize how players and teams compare. By mapping everyone into the same PCA space, I can measure how closely their styles align, giving us a clearer picture of player-team compatibility.

## Data & Metrics Overview

---

### How PCA Works

Imagine you’re sorting a massive pile of football stickers with different traits—some are shiny, colorful, big, or small. Instead of focusing on every detail, PCA helps you find the most important patterns, like grouping stickers into “bright vs. dull” or “big vs. small.” These patterns, called **principal components**, make it easier to see what really matters.

Now think about football metrics—things like passes, shots, and dribbles. Players and teams have so many numbers that it’s overwhelming to compare them. PCA simplifies this by finding the main ways players and teams differ. For example:

- It might show how players balance dribbling and shooting versus focusing on passing.  
- It could also highlight how teams vary between possession-heavy styles and quick counterattacks.

The result of PCA is a set of new numbers (coordinates) for each player or team in a smaller space. These numbers represent how they fit into the big patterns identified by PCA. Think of it like reducing a 14-metric puzzle into just two or three key pieces, which makes it much easier to compare players or teams and group them by similar styles.

---

### Metrics I’m Using

For this analysis, I used match event data provided by StatsBomb to evaluate the 2015/2016 season across the top five European leagues—Premier League, Serie A, La Liga, Bundesliga, and Ligue 1. The following **13 metrics** were calculated at both the player level and the team level to capture individual and collective styles of play:

1. **Possession:** The percentage of game time the team controlled the ball while the player was on the pitch.  
2. **Pass Completion Rate:** The percentage of successful passes out of all passes attempted.  
3. **xG per 90:** Expected Goals per 90 minutes, indicating how likely a player’s shots were to result in goals.  
4. **Shots per 90:** Total shots attempted per 90 minutes.  
5. **Key Passes per 90:** Passes leading directly to a shot per 90 minutes.  
6. **Dribbles per 90:** Successful dribbles per 90 minutes.  
7. **Duel Success Rate:** The percentage of physical challenges (like tackles and aerial duels) won by the player.  
8. **Interceptions per 90:** The number of successful interceptions per 90 minutes.  
9. **Fouls Committed per 90:** Total fouls committed per 90 minutes.  
10. **Progressive Passes per 90:** Passes that move the ball significantly closer to the opponent’s goal.  
11. **Set Piece xG per 90:** Expected Goals from set-piece shots like free kicks and corners, scaled to 90 minutes.  
12. **Player Pass Length Avg:** The average length of completed passes (in yards).  
13. **Counterattacks per 90:** Shots resulting from counterattacks per 90 minutes.

To account for differences in league strength, all metrics were transformed into **percentile ranks**. For example, a player in the 90th percentile for xG per 90 performed better in that area than 90% of the players in the dataset.

While this analysis focuses on these 13 metrics, there are many others that could provide further insights. For example, metrics like pressures in the attacking third, ball recoveries, cross completion rate, etc. For now, I’ve chosen these metrics as a balanced starting point that covers attacking, passing, defensive, and tactical contributions effectively.

---

### Building the PCA Space

After converting metrics into percentile ranks, I combined player and team data into a single dataset, ensuring consistent metric definitions. This dataset forms a large matrix where each row represents a player or team, and each column corresponds to one of the 13 metrics.

Using PCA, I identified the main patterns in this data, called **principal components (PCs)**. Each PC is a linear combination of the original metrics, weighted by their contributions (**loadings**). These loadings indicate how strongly each metric influences the principal component, similar to coefficients in a regression model. For example, PC1 can be expressed as:

PC1 = 0.9474 * (Progressive Passes per 90) + 0.1937 * (Fouls Committed per 90) + ...

Here are the loadings for the **first two principal components**:

- **PC1 (92.3% Variance):**
  - Progressive Passes per 90: +0.9474 (dominant contribution)
  - Fouls Committed per 90: +0.1937
  - Shots per 90: +0.1624
  - Dribbles per 90: +0.1219
  - Key Passes per 90: +0.1077
  - Interceptions per 90: +0.0947
  - Player Pass Length Avg: +0.0528
  - xG per 90: +0.0163 (insignificant)
  - Set Piece xG per 90: +0.0084 (insignificant)
  - Counterattacks per 90: +0.0070 (insignificant)

  PC1 primarily reflects **progressive passing**. Metrics like xG, set-piece xG, and counterattacks contribute minimally and do not significantly influence this dimension.

- **PC2 (6.3% Variance):**
  - Player Pass Length Avg: +0.9795 (dominant contribution)
  - Shots per 90: -0.1400
  - Dribbles per 90: -0.0949
  - Fouls Committed per 90: -0.0801
  - Key Passes per 90: -0.0707
  - xG per 90: -0.0177 (insignificant)
  - Duel Success Rate: +0.0111 (insignificant)
  - Counterattacks per 90: -0.0100 (insignificant)
  - Set Piece xG per 90: -0.0075 (insignificant)
  - Progressive Passes per 90: +0.0064 (insignificant)

  PC2 is overwhelmingly driven by **average pass length**, distinguishing between shorter and longer passing styles. Most other metrics, such as xG and counterattacks, have negligible influence.

#### Why Some Metrics are Insignificant

PCA focuses on the patterns that explain the most variance in the data. Metrics with small loadings, such as xG per 90 and set-piece xG per 90, contribute little to the primary differences between playing styles and therefore have minimal impact on the axes.

---

## Visualizing the PCA Results

<figure class="chart-image">
  <img src="{{ site.baseurl }}/assets/PCA_Space/pca_space_highlighted.png" alt="PCA Space" />
  <figcaption>
    PCA scatterplot visualizing player and team playing styles. Data points are clustered into three groups: blue (more 
    balanced/defensive players), orange (teams), and green (attacking players). Players are represented by circles, teams 
    by squares. The positions of Gerard Piqué (Center Back) and Barcelona (lower in the blue cluster and far right in the 
    orange cluster) exemplify a short, progressive passing style, while Gareth McAuley (Center Back) and West Brom (higher 
    in the blue cluster and far left in the orange cluster) demonstrate a long, less progressive passing approach.
  </figcaption>
</figure>

## Interpreting the PCA Scatterplot

This scatterplot illustrates how players and teams align along two key dimensions identified through Principal Component Analysis (PCA). The x-axis (PC1) represents the spectrum of progressive versus less progressive passing. Players and teams positioned further to the right emphasize advancing the ball forward through passes, while those on the left lean toward a less progressive or more direct approach. The y-axis (PC2) captures passing style, contrasting short versus long passes. Higher values on this axis indicate a preference for long passes, whereas lower values reflect a tendency toward shorter, intricate passing styles.

**Highlighted Examples:**

*   **Gerard Piqué (Barcelona):** Positioned lower on the scatterplot, Piqué exemplifies Barcelona’s possession-heavy approach, characterized by short, progressive passes that control the game and advance play. Barcelona, as a team, is located at the far right of the orange cluster, reflecting their strong emphasis on progressive passing.
*   **Gareth McAuley (West Bromwich Albion):** Found higher on the scatterplot, McAuley reflects West Brom’s direct style, focusing on long passes to quickly transition the ball forward. West Brom, as a team, is positioned at the far left of the orange cluster, underscoring their less progressive and more direct passing approach.

Their teams also align with these playing styles, showcasing the tactical consistency between individual players and their clubs.

**A Caveat: No Position-Based Clustering**

While this analysis effectively groups players and teams based on playing style, it does not explicitly cluster by position (e.g., defenders, midfielders, attackers). As a result, players in similar positions but with contrasting styles (e.g., Piqué vs. McAuley) appear far apart. Future analyses could incorporate position-specific clustering to add more granularity to these insights.

---

## Introducing the 2015/2016 Transfers

To put this approach into practice, I analyzed several notable transfers from the 2015/2016 season, evaluating how well players’ styles matched their new teams. These include:

*   **Defenders:**
    *   Šime Vrsaljko (from Sassuolo to Atlético Madrid)
    *   Shkodran Mustafi (from Valencia to Arsenal)
    *   Raphaël Guerreiro (from Lorient to Dortmund)
*   **Attackers:**
    *   Memphis Depay (from Manchester United to Lyon)
    *   Sadio Mané (from Southampton to Liverpool)
    *   Ousmane Dembélé (from Rennes to Dortmund)
*   **Midfielders:**
    *   Miralem Pjanić (from AS Roma to Juventus)
    *   Paul Pogba (from Juventus to Manchester United)
    *   İlkay Gündoğan (from Dortmund to Manchester City)

---

**Šime Vrsaljko – LaLiga & Atlético Madrid**

<figure class="chart-image">
  <img src="{{ site.baseurl }}/assets/PCA_Transfers/VRSALJKO.jpg" alt="PCA Space" />
  <figcaption>
  </figcaption>
</figure>

Vrsaljko’s move to Atlético Madrid from Sassuolo was a notable transfer, and the PCA results provide an interesting perspective on how well his playing style aligned with his new team.

Distance-Based PCA Ranking

<figure class="chart-image">
  <img src="{{ site.baseurl }}/assets/PCA_Ranks/side_by_side_Šime_Vrsaljko_Atlético_Madrid_LaLiga.png" alt="PCA Space" />
  <figcaption>
    (Left) Distances of LaLiga teams from Vrsaljko (excluding Sassuolo), with Atlético Madrid highlighted; (Right) Top 10 
    teams across the top five leagues.
  </figcaption>
</figure>

In LaLiga, Real Betis (2.654) and Real Sociedad (3.083) posted slightly closer distances to Vrsaljko than Atlético Madrid (3.125). However, Atlético still ranked among the top three matches for him within the league. When looking across the top five European leagues, Atlético placed 7th in rank, indicating a strong stylistic alignment, even though some clubs like Bordeaux or Montpellier had slightly smaller distances.

These rankings are derived from PCA, which converts player and team metrics into percentile scores (e.g., team dribbles per 90 or interceptions per 90) and measures the distance between percentile profiles. In simplified terms:

*   PCA compares profiles by placing both player and team percentile vectors into a multi-dimensional space, where each metric is a dimension.
*   The distance between two profiles reflects how closely the player’s metrics align with the team’s. A smaller distance suggests a better stylistic fit, while a larger distance points to more differences.

Combining the PCA Scatterplot and Bar Charts

<figure class="chart-image">
  <img src="{{ site.baseurl }}/assets/PCA_Space/pca_space_highlighted_Vrsaljko.png" alt="PCA Space" />
  <figcaption>
    PCA Scatterplot showing the relative location of the top three teams in LaLiga from Vrsaljko.
  </figcaption>
</figure>

The PCA scatterplot provides a helpful overview of playing styles and relative distances. For instance, highlighting Real Betis, Real Sociedad, and Atlético Madrid on the scatterplot shows how these teams cluster in the progressive vs. direct and short vs. long passing dimensions. However, the scatterplot alone may not offer the level of precision needed for detailed comparisons.

To dive deeper, we will use grouped bar charts to break down individual metrics, illustrating exactly where Vrsaljko’s style aligns or diverges from Atlético’s. By combining the scatterplot and bar charts, we can better understand both the overall trends and specific details of the match.

Comparative Metrics Overview

<figure class="chart-image">
  <img src="{{ site.baseurl }}/assets/PCA_Metrics/global_percentile_comparison_ŠimeVrsaljko_AtléticoMadrid.png" alt="PCA Space" />
  <figcaption>
    (Left) Percentile bar chart of metrics: Vrsaljko vs. Atlético Madrid; (Right) Table of raw values + percentiles
  </figcaption>
</figure>

Several metrics highlight areas of alignment and divergence between Vrsaljko and Atlético Madrid:

*   **Possession & Pass Accuracy:**

    Vrsaljko demonstrated a moderate-to-high possession percentile, suggesting comfort on the ball. Atlético’s percentile was slightly lower, reflecting their counter-focused, mid-block style under Diego Simeone.

    Both had solid pass completion rates, but Atlético’s percentile lagged behind top possession teams. This may have increased the PCA distance if Vrsaljko had become accustomed to a more methodical buildup at Sassuolo.

*   **Defensive Engagement:**

    *   **Interceptions per 90:** Vrsaljko ranked at 69.2%, while Atlético excelled at 93.9%, reflecting their disciplined positioning and tendency for timely interceptions. This alignment reduced the PCA distance and highlighted Vrsaljko’s compatibility with Atlético’s system.
    *   **Fouls Committed per 90:** Vrsaljko’s percentile (87.4%) was higher than Atlético’s (53.1%), suggesting Vrsaljko concedes fewer fouls. Conversely, Atlético’s tactical fouling was more frequent, slightly widening the PCA distance.

*   **Forward Contributions:**

    *   **Dribbles per 90:** Vrsaljko’s percentile (67.7%) was lower than Atlético’s (96.9%), likely reflecting the team’s reliance on attacking players for dribble-heavy opportunities.
    *   **Shots per 90 & xG per 90:** Vrsaljko’s output in these metrics was moderate, while Atlético’s high team percentiles suggested robust attacking support from multiple players.

These areas of alignment in defense (e.g., interceptions) and minor mismatches (e.g., fouls or dribble volume) collectively shaped the PCA distance.

**Vrsaljko’s Time at Atlético Madrid**

Despite the PCA showing Atlético Madrid as a strong but not perfect match, Vrsaljko adapted well to Simeone’s system when fit. His strengths, such as ball-carrying ability and solid defensive reading, complemented Atlético’s disciplined style. However, injuries and competition for starting spots occasionally limited his playing time. When on the pitch, Vrsaljko’s percentile-based strengths, such as his interceptions and possession comfort, meshed effectively with the team’s approach.
